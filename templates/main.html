<!DOCTYPE html>
{% load static %}
{% load static tailwind_tags %}
{% load webpush_notifications %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Apogee</title>
    {% tailwind_css %}

    <link rel="icon" type="image/svg+xml" href="{% static 'assets/icons/light_apogee.svg' %}">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        :root {
            --dropdown-icon-url: url("{% static 'assets/images/dropdown.svg' %}");
        }
    </style>

    <link rel="stylesheet" type="text/css"  href="{% static 'style.css' %}">
    {% block css %}{% endblock %}

    <!-- Boxiocns CDN Link -->
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.1.0-rc.0/css/select2.min.css" rel="stylesheet" />
    {% webpush_header %}
</head>
<body class="h-screen w-screen m-0 p-0 overflow-hidden">
    <main class="flex-col h-screen ">
        <div class="nav-bar h-[8vh] px-5 bg-rifleBlue text-rifleBlue-100 font-poppins flex flex-row justify-between items-center relative">
            <div class="logo-details flex flex-row items-center">
                 <img src="{% static 'assets/icons/light_apogee.svg' %}" alt="Logo" class="logo-icon w-16 inline-block mr-2">
              <span class="logo_name font-bold text-xl ">Apogee</span>
            </div>
            <ul class="nav-links flex flex-row" id="nav-links">
                <li 
                    x-data="{ hover: false }" 
                    id="home" 
                    class="nav-item {% if request.path == '/' %}active{% endif %}" 
                    data-url="{% url 'home' %}" 
                    @mouseover="hover = true" 
                    @mouseleave="hover = false"
                >
                    <i 
                            x-cloak
                        class="fa-solid fa-house text-[18px]" 
                        :class="{ 'hidden': !hover && !document.querySelector('#home').classList.contains('active') }"
                    ></i>
                    <h3 class="font-semibold text-md">Home</h3>
                </li>
                <li 
                    x-data="{ hover: false }" 
                    id="predictions" 
                    class="nav-item {% if request.path == '/predictions/' %}active{% endif %}" 
                    data-url="{% url 'predictions' %}" 
                    @mouseover="hover = true" 
                    @mouseleave="hover = false"
                >
                    <i x-cloak
                        class="fa-solid fa-satellite-dish text-[18px]" 
                        :class="{ 'hidden': !hover && !document.querySelector('#predictions').classList.contains('active') }"
                    ></i>
                    <h3 class="font-semibold text-md">Predictions</h3>
                </li>
                <li x-cloak
                    x-data="{ hover: false }" 
                    id="storage" 
                    class="nav-item {% if request.path == '/storage/' %}active{% endif %}" 
                    data-url="{% url 'storage' %}" 
                    @mouseover="hover = true" 
                    @mouseleave="hover = false"
                >
                    <i x-cloak
                        class="fa-solid fa-database text-[18px]" 
                        :class="{ 'hidden': !hover && !document.querySelector('#storage').classList.contains('active') }"
                    ></i>
                    <h3 class="font-semibold text-md">Storage</h3>
                </li>
                <li 
                    x-data="{ hover: false }" 
                    id="settings" 
                    class="nav-item {% if request.path == '/settings/ground_station/' or request.path == '/settings/satellites/'  or request.path == '/settings/notifications/' or request.path == '/settings/about/' %}active{% endif %}" 
                    data-url="{% url 'ground_station' %}" 
                    @mouseover="hover = true" 
                    @mouseleave="hover = false"
                >
                    <i x-cloak
                        class="fa-solid fa-gear text-[18px]" 
                        :class="{ 'hidden': !hover && !document.querySelector('#settings').classList.contains('active') }"
                    ></i>
                    <h3 class="font-semibold text-md">Settings</h3>
                </li>
                <li 
                    x-data="{ hover: false }"
                    id="profile" 
                    class="nav-item border-2 border-gray-300 hover:border-[#87d1d9] hover:bg-rifleBlue-50 {% if request.path == '/profile/' %}active{% endif %}" 
                    data-url="{% url 'profile' %}" 
                    @mouseover="hover = true" 
                    @mouseleave="hover = false"
                >
                    <!-- User Profile Image or Icon -->
                    {% if user.is_authenticated and user.profile.profile_image %}
                        <img 
                            src="{{ user.profile.profile_image.url }}" 
                            alt="User Profile" 
                            class="w-6 h-6 rounded-full object-cover"
                        >
                    {% else %}
                        <i 
                            class="fa-solid fa-user text-[18px]" 
                        ></i>
                    {% endif %}
                    <!-- User Name -->
                    <h3 x-cloak
                        class="font-semibold text-md" 
                        :class="{ 'hidden': !hover && !document.querySelector('#profile').classList.contains('active') }"
                    >
                        {% if user.is_authenticated %}
                            {{ user.first_name }} {{ user.last_name }}
                        {% else %}
                            Guest
                        {% endif %}
                    </h3>
                </li>

            </ul>

        </div>
    
        <div class="main-section h-[92vh] p-3 flex flex-row justify-between bg-backgroundColor">
        {% block content %}
            
         {% endblock %} 
        </div>
        <div id="notification-container" class="fixed top-4 right-4 z-50 space-y-4"></div>

    </main>
{#    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>#}
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>

    <script src="https://unpkg.com/leaflet@latest/dist/leaflet.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@2.8.2/dist/alpine.min.js" defer></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/js/all.min.js" integrity="sha512-6sSYJqDreZRZGkJ3b+YfdhB3MzmuP9R7X1QZ6g5aIXhRvR1Y/N/P47jmnkENm7YL3oqsmI6AK+V6AD99uWDnIw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.1.0-rc.0/js/select2.min.js"></script>
    <script src="{% static 'script.js' %}" type="module"></script>
{#    <script src="http://localhost:8001/static/django-browser-reload/reload-listener.js"></script>#}
    {% block js %}{% endblock %}
</body>
</html>